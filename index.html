<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Puzzle Europe : Drag & Drop des Pays</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f8ff;
        }
        #game-container {
            display: flex;
            justify-content: space-around;
            margin: 20px auto;
            max-width: 1000px;
        }
        #map {
            width: 600px;
            height: 500px;
            background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Europe_blank_map.png/600px-Europe_blank_map.png');
            background-size: cover;
            position: relative;
            border: 2px solid #333;
        }
        #countries-pool {
            display: flex;
            flex-wrap: wrap;
            width: 200px;
            gap: 10px;
            align-content: flex-start;
        }
        .country {
            padding: 8px;
            background-color: #4CAF50;
            color: white;
            border-radius: 5px;
            cursor: grab;
            user-select: none;
            text-align: center;
            margin: 5px;
        }
        .country.dragging {
            opacity: 0.5;
        }
        .country.placed {
            background-color: #8BC34A;
            cursor: default;
        }
        #message {
            font-weight: bold;
            margin: 20px;
            color: #2e7d32;
        }
    </style>
</head>
<body>
    <h1>üåç Puzzle Europe : Place les pays sur la carte !</h1>
    <p>Faites glisser les pays dans leur emplacement correct.</p>
    
    <div id="game-container">
        <div id="map"></div>
        <div id="countries-pool"></div>
    </div>
    
    <div id="message"></div>
    
    <script>
        // Donn√©es des pays et leurs positions approximatives sur la carte (% de la largeur/hauteur)
        const europeanCountries = [
            { name: "France", x: 40, y: 60 },
            { name: "Allemagne", x: 55, y: 50 },
            { name: "Espagne", x: 30, y: 70 },
            { name: "Italie", x: 50, y: 75 },
            { name: "Pologne", x: 65, y: 50 }
        ];
        
        let draggedCountry = null;
        let offsetX, offsetY;
        
        // Afficher les pays √† placer
        const countriesPool = document.getElementById('countries-pool');
        europeanCountries.forEach(country => {
            const div = document.createElement('div');
            div.className = 'country';
            div.textContent = country.name;
            div.dataset.name = country.name;
            div.draggable = true;
            
            div.addEventListener('dragstart', (e) => {
                draggedCountry = div;
                offsetX = e.offsetX;
                offsetY = e.offsetY;
                div.classList.add('dragging');
                e.dataTransfer.setData('text/plain', country.name);
            });
            
            div.addEventListener('dragend', () => {
                div.classList.remove('dragging');
            });
            
            countriesPool.appendChild(div);
        });
        
        // G√©rer le d√©p√¥t sur la carte
        const map = document.getElementById('map');
        map.addEventListener('dragover', (e) => {
            e.preventDefault();
        });
        
        map.addEventListener('drop', (e) => {
            e.preventDefault();
            if (!draggedCountry) return;
            
            const countryName = draggedCountry.dataset.name;
            const countryData = europeanCountries.find(c => c.name === countryName);
            
            // Calculer la position relative √† la carte
            const rect = map.getBoundingClientRect();
            const x = e.clientX - rect.left - offsetX;
            const y = e.clientY - rect.top - offsetY;
            
            // V√©rifier si le placement est approximativement correct (¬±10%)
            const isCorrect = 
                Math.abs(x/rect.width * 100 - countryData.x) < 10 && 
                Math.abs(y/rect.height * 100 - countryData.y) < 10;
            
            if (isCorrect) {
                draggedCountry.style.position = 'absolute';
                draggedCountry.style.left = `${countryData.x/100 * rect.width}px`;
                draggedCountry.style.top = `${countryData.y/100 * rect.height}px`;
                draggedCountry.classList.add('placed');
                draggedCountry.draggable = false;
                map.appendChild(draggedCountry);
                document.getElementById('message').textContent = `Bien jou√© ! ${countryName} est correctement plac√©.`;
                
                // V√©rifier si tous les pays sont plac√©s
                if (document.querySelectorAll('#map .country').length === europeanCountries.length) {
                    document.getElementById('message').textContent = "F√©licitations ! Vous avez compl√©t√© la carte de l'Europe ! üéâ";
                }
            } else {
                document.getElementById('message').textContent = "Essaie encore ! Ce n'est pas la bonne position pour " + countryName;
            }
            
            draggedCountry = null;
        });
    </script>
</body>
</html>
