<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeu de G√©ographie - Europe</title>
    <style>
        :root {
            --bg-light: #f0f8ff;
            --bg-dark: #1a1a2e;
            --card-light: #ffffff;
            --card-dark: #16213e;
            --text-light: #333;
            --text-dark: #f5f5f5;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: var(--bg-light);
            color: var(--text-light);
            transition: all 0.3s;
        }
        
        body.dark-mode {
            background-color: var(--bg-dark);
            color: var(--text-dark);
        }
        
        .game-container {
            display: flex;
            flex-direction: column;
            max-width: 1000px;
            margin: 0 auto;
        }
        
        #map-container {
            position: relative;
            width: 100%;
            height: 500px;
            margin-bottom: 20px;
            border: 2px solid #333;
            border-radius: 8px;
            overflow: hidden;
        }
        
        #europe-map {
            width: 100%;
            height: 100%;
            background-color: #e8f4f8;
        }
        
        .country-slot {
            position: absolute;
            padding: 8px 12px;
            background: #4CAF50;
            color: white;
            border-radius: 4px;
            cursor: grab;
            z-index: 10;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .country-slot.placed {
            background: #2ecc71;
            cursor: default;
        }
        
        #controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        #country-pool {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .country-item {
            padding: 8px 12px;
            background: #3498db;
            color: white;
            border-radius: 4px;
            cursor: grab;
            user-select: none;
        }
        
        .country-item.used {
            opacity: 0.3;
            cursor: default;
        }
        
        #score-display {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 8px;
            background: #333;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .country-highlight {
            fill: #f1c40f;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .country-correct {
            fill: #2ecc71;
            opacity: 0.7;
        }
    </style>
</head>
<body>
    <button class="theme-toggle" id="themeToggle">üåô Mode Sombre</button>
    
    <div class="game-container">
        <h1>Jeu de G√©ographie - Europe</h1>
        <p>Placez les pays sur leur emplacement correct</p>
        
        <div id="controls">
            <div id="score-display">Score: <span id="score">0</span></div>
            <button id="reset-btn">R√©initialiser</button>
        </div>
        
        <div id="country-pool">
            <!-- Les pays seront ajout√©s ici par JavaScript -->
        </div>
        
        <div id="map-container">
            <!-- Carte SVG de l'Europe -->
            <svg id="europe-map" viewBox="0 0 1000 850" xmlns="http://www.w3.org/2000/svg">
                <!-- France -->
                <path id="france" d="M200,350 L210,360 L220,350 L230,340 L240,330 L250,320 L260,310 L270,300 L280,290 L290,280 L300,270 L310,260 L320,250 L330,240 L340,230 L350,220 L360,210 L370,200 L380,190 L390,180 L400,170 L410,160 L420,150 L430,140 L440,130 L450,120 L460,110 L470,100 L480,90 L490,80 L500,70" fill="#ecf0f1" stroke="#7f8c8d"/>
                <!-- Allemagne -->
                <path id="germany" d="M300,300 L310,310 L320,320 L330,330 L340,340 L350,350 L360,360 L370,370 L380,380 L390,390 L400,400 L410,410 L420,420 L430,430 L440,440 L450,450 L460,460 L470,470 L480,480 L490,490 L500,500" fill="#ecf0f1" stroke="#7f8c8d"/>
                <!-- Espagne -->
                <path id="spain" d="M150,400 L160,410 L170,420 L180,430 L190,440 L200,450 L210,460 L220,470 L230,480 L240,490 L250,500 L260,510 L270,520 L280,530 L290,540 L300,550" fill="#ecf0f1" stroke="#7f8c8d"/>
                <!-- Italie -->
                <path id="italy" d="M280,450 L290,460 L300,470 L310,480 L320,490 L330,500 L340,510 L350,520 L360,530 L370,540 L380,550 L390,560 L400,570" fill="#ecf0f1" stroke="#7f8c8d"/>
                <!-- Plus de pays... -->
            </svg>
        </div>
    </div>

    <script>
        // Donn√©es des pays
        const countries = [
            { id: "france", name: "France", x: 200, y: 350 },
            { id: "germany", name: "Allemagne", x: 300, y: 300 },
            { id: "spain", name: "Espagne", x: 150, y: 400 },
            { id: "italy", name: "Italie", x: 280, y: 450 },
            { id: "uk", name: "Royaume-Uni", x: 180, y: 250 },
            { id: "portugal", name: "Portugal", x: 100, y: 380 }
        ];

        let score = 0;
        let draggedCountry = null;
        let offsetX, offsetY;

        // Initialisation du jeu
        function initGame() {
            const countryPool = document.getElementById('country-pool');
            
            // M√©langer les pays
            const shuffledCountries = [...countries].sort(() => Math.random() - 0.5);
            
            // Cr√©er les √©l√©ments de pays
            shuffledCountries.forEach(country => {
                const div = document.createElement('div');
                div.className = 'country-item';
                div.textContent = country.name;
                div.dataset.id = country.id;
                div.draggable = true;
                
                div.addEventListener('dragstart', (e) => {
                    draggedCountry = div;
                    offsetX = e.offsetX;
                    offsetY = e.offsetY;
                    highlightCountry(country.id);
                    e.dataTransfer.setData('text/plain', country.id);
                });
                
                div.addEventListener('dragend', () => {
                    unhighlightCountry(country.id);
                });
                
                countryPool.appendChild(div);
            });
            
            // Gestion du drop sur la carte
            document.getElementById('europe-map').addEventListener('dragover', (e) => {
                e.preventDefault();
            });
            
            document.getElementById('europe-map').addEventListener('drop', (e) => {
                e.preventDefault();
                if (!draggedCountry) return;
                
                const countryId = e.dataTransfer.getData('text/plain');
                const country = countries.find(c => c.id === countryId);
                
                if (country) {
                    const svgRect = e.currentTarget.getBoundingClientRect();
                    const x = e.clientX - svgRect.left;
                    const y = e.clientY - svgRect.top;
                    
                    // V√©rifier si le pays est plac√© au bon endroit
                    const targetPath = document.getElementById(country.id);
                    if (targetPath && isPointInPath(targetPath, x, y)) {
                        placeCountry(country, x, y);
                        updateScore(10);
                        markCountryCorrect(country.id);
                    } else {
                        updateScore(-5);
                    }
                }
            });
            
            // Bouton de r√©initialisation
            document.getElementById('reset-btn').addEventListener('click', resetGame);
            
            // Bouton de th√®me
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
        }
        
        // Placer un pays sur la carte
        function placeCountry(country, x, y) {
            const countryElement = document.createElement('div');
            countryElement.className = 'country-slot placed';
            countryElement.textContent = country.name;
            countryElement.style.left = `${x - offsetX}px`;
            countryElement.style.top = `${y - offsetY}px`;
            
            document.getElementById('map-container').appendChild(countryElement);
            
            // Marquer le pays comme utilis√©
            draggedCountry.classList.add('used');
            draggedCountry.draggable = false;
            draggedCountry = null;
        }
        
        // Mettre √† jour le score
        function updateScore(points) {
            score += points;
            document.getElementById('score').textContent = score;
        }
        
        // V√©rifier si un point est dans un chemin SVG
        function isPointInPath(path, x, y) {
            const point = document.getElementById('europe-map').createSVGPoint();
            point.x = x;
            point.y = y;
            return path.isPointInFill(point);
        }
        
        // Mettre en √©vidence un pays
        function highlightCountry(countryId) {
            const path = document.getElementById(countryId);
            if (path) path.classList.add('country-highlight');
        }
        
        // Retirer la mise en √©vidence
        function unhighlightCountry(countryId) {
            const path = document.getElementById(countryId);
            if (path) path.classList.remove('country-highlight');
        }
        
        // Marquer un pays comme correct
        function markCountryCorrect(countryId) {
            const path = document.getElementById(countryId);
            if (path) {
                path.classList.add('country-correct');
                path.classList.remove('country-highlight');
            }
        }
        
        // R√©initialiser le jeu
        function resetGame() {
            score = 0;
            document.getElementById('score').textContent = score;
            
            // Supprimer tous les pays plac√©s
            document.querySelectorAll('.country-slot').forEach(el => el.remove());
            
            // R√©activer tous les pays
            document.querySelectorAll('.country-item').forEach(el => {
                el.classList.remove('used');
                el.draggable = true;
            });
            
            // R√©initialiser les couleurs des pays
            countries.forEach(country => {
                const path = document.getElementById(country.id);
                if (path) {
                    path.classList.remove('country-correct');
                    path.classList.remove('country-highlight');
                }
            });
        }
        
        // Basculer entre les th√®mes clair/sombre
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            document.getElementById('themeToggle').textContent = isDark ? '‚òÄÔ∏è Mode Clair' : 'üåô Mode Sombre';
            localStorage.setItem('darkMode', isDark);
        }
        
        // Charger le th√®me sauvegard√©
        function loadTheme() {
            const darkMode = localStorage.getItem('darkMode') === 'true';
            if (darkMode) {
                document.body.classList.add('dark-mode');
                document.getElementById('themeToggle').textContent = '‚òÄÔ∏è Mode Clair';
            }
        }
        
        // D√©marrer le jeu
        loadTheme();
        initGame();
    </script>
</body>
</html>
