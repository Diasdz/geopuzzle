<!DOCTYPE html>
<html>
<head>
  <title>Puzzle Géographique Réaliste</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      text-align: center;
      background: #f0f8ff;
      padding: 20px;
    }
    #world-map {
      width: 100%;
      max-width: 1200px;
      margin: 20px auto;
      position: relative;
      border: 2px solid #333;
      border-radius: 8px;
    }
    .country-piece {
      position: absolute;
      cursor: grab;
      transition: transform 0.2s;
      z-index: 10;
      max-width: 150px;
    }
    .country-mask {
      position: absolute;
      opacity: 0.4;
      pointer-events: none;
      z-index: 5;
    }
    #controls {
      margin: 20px;
    }
    button {
      background: #3498db;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      margin: 0 10px;
    }
  </style>
</head>
<body>
  <h1>Puzzle Monde Réaliste</h1>
  <p>Place chaque pays exactement sur son territoire !</p>
  
  <div id="controls">
    <button id="toggle-masks">Afficher les contours</button>
    <button id="check">Vérifier</button>
  </div>

  <!-- Carte du monde avec coordonnées réalistes -->
  <div id="world-map">
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/80/World_map_-_low_resolution.svg/1200px-World_map_-_low_resolution.svg.png" 
         alt="Carte du monde" style="width:100%">
    
    <!-- Masques des pays (contours) -->
    <img src="https://i.imgur.com/FRANCE_MASK.png" class="country-mask" id="france-mask" 
         style="width:150px; left:42%; top:31%; display:none;">
    <img src="https://i.imgur.com/ITALY_MASK.png" class="country-mask" id="italy-mask" 
         style="width:120px; left:44%; top:33%; display:none;">
    <img src="https://i.imgur.com/BRAZIL_MASK.png" class="country-mask" id="brazil-mask" 
         style="width:180px; left:30%; top:55%; display:none;">
    
    <!-- Drapeaux à placer -->
    <img src="https://flagcdn.com/w160/fr.png" class="country-piece" id="france" 
         style="width:100px; left:20%; top:20%;">
    <img src="https://flagcdn.com/w160/it.png" class="country-piece" id="italy" 
         style="width:90px; left:25%; top:25%;">
    <img src="https://flagcdn.com/w160/br.png" class="country-piece" id="brazil" 
         style="width:110px; left:20%; top:50%;">
  </div>

  <script>
    // Positions réalistes (% de la largeur/hauteur de la carte)
    const countryData = {
      france: {
        mask: "france-mask",
        correctX: 42, // % from left
        correctY: 31  // % from top
      },
      italy: {
        mask: "italy-mask",
        correctX: 44,
        correctY: 33
      },
      brazil: {
        mask: "brazil-mask",
        correctX: 30,
        correctY: 55
      }
    };

    // Drag & Drop
    document.querySelectorAll('.country-piece').forEach(piece => {
      piece.addEventListener('mousedown', startDrag);
    });

    function startDrag(e) {
      const piece = e.target;
      const startX = e.clientX;
      const startY = e.clientY;
      const startLeft = parseFloat(piece.style.left);
      const startTop = parseFloat(piece.style.top);
      const mapRect = document.getElementById('world-map').getBoundingClientRect();
      const mapWidth = mapRect.width;
      const mapHeight = mapRect.height;

      function move(e) {
        const newLeft = startLeft + (e.clientX - startX) / mapWidth * 100;
        const newTop = startTop + (e.clientY - startY) / mapHeight * 100;
        piece.style.left = `${Math.max(0, Math.min(90, newLeft))}%`;
        piece.style.top = `${Math.max(0, Math.min(90, newTop))}%`;
      }

      function stopDrag() {
        document.removeEventListener('mousemove', move);
        document.removeEventListener('mouseup', stopDrag);
      }

      document.addEventListener('mousemove', move);
      document.addEventListener('mouseup', stopDrag);
    }

    // Contrôles
    document.getElementById('toggle-masks').addEventListener('click', () => {
      const masks = document.querySelectorAll('.country-mask');
      masks.forEach(mask => {
        mask.style.display = mask.style.display === 'none' ? 'block' : 'none';
      });
    });

    document.getElementById('check').addEventListener('click', () => {
      let correctCount = 0;
      
      Object.keys(countryData).forEach(countryId => {
        const piece = document.getElementById(countryId);
        const data = countryData[countryId];
        const pieceLeft = parseFloat(piece.style.left);
        const pieceTop = parseFloat(piece.style.top);
        
        if (Math.abs(pieceLeft - data.correctX) < 3 && 
            Math.abs(pieceTop - data.correctY) < 3) {
          piece.style.border = '2px solid #2ecc71';
          correctCount++;
        } else {
          piece.style.border = '2px solid #e74c3c';
        }
      });
      
      alert(`${correctCount} pays sur ${Object.keys(countryData).length} bien placés !`);
    });
  </script>
</body>
</html>
